<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamVault - AI-Powered Dream Journal</title>
    <meta name="description" content="Record, analyze, and understand your dreams with advanced AI insights. Join the waitlist for premium features!">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#6366f1">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="DreamVault">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŒ™</text></svg>">
    
    <!-- Scripts in correct order -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Force cache busting -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <style>
        .waitlist-glow {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            background-size: 300% 300%;
            animation: gradientShift 3s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .loading-dots {
            animation: loading 1.4s infinite ease-in-out both;
        }
        
        .loading-dots:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes loading {
            0%, 80%, 100% { 
                transform: scale(0);
                opacity: 0.5;
            } 40% { 
                transform: scale(1.0);
                opacity: 1;
            }
        }
        
        .ai-typing {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .dream-card {
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        
        .dream-card:hover {
            transform: translateY(-2px);
        }
        
        .streak-fire {
            animation: flicker 2s infinite alternate;
        }
        
        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .notification-slide {
            animation: slideInRight 0.3s ease-out;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .premium-blur {
            filter: blur(1px);
            opacity: 0.6;
            pointer-events: none;
        }
        
        .coming-soon-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            z-index: 10;
        }
        
        .dark {
            color-scheme: dark;
        }
        
        .gradient-text {
            background: linear-gradient(45deg, #6366f1, #8b5cf6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash" class="splash-screen">
        <div class="text-center text-white">
            <div class="text-6xl mb-4">ðŸŒ™</div>
            <h1 class="text-3xl font-bold mb-2">DreamVault</h1>
            <p class="text-xl opacity-80">Loading your dreams...</p>
            <div class="flex justify-center space-x-1 mt-4">
                <div class="w-2 h-2 bg-white rounded-full loading-dots"></div>
                <div class="w-2 h-2 bg-white rounded-full loading-dots"></div>
                <div class="w-2 h-2 bg-white rounded-full loading-dots"></div>
            </div>
        </div>
    </div>

    <div id="root"></div>
    
    <script>
        // Remove splash screen
        setTimeout(() => {
            const splash = document.getElementById('splash');
            if (splash) {
                splash.style.opacity = '0';
                splash.style.transition = 'opacity 0.5s ease-out';
                setTimeout(() => {
                    splash.style.display = 'none';
                }, 500);
            }
        }, 2000);
        
        // Create React components without JSX
        const { useState, useEffect } = React;
        
        function DreamJournalApp() {
            const [currentView, setCurrentView] = useState('journal');
            const [dreams, setDreams] = useState([]);
            const [newDream, setNewDream] = useState({
                title: '',
                content: '',
                mood: 'neutral',
                lucid: false,
                tags: [],
                date: new Date().toISOString().split('T')[0]
            });
            const [isEditing, setIsEditing] = useState(false);
            const [editingId, setEditingId] = useState(null);
            const [showWaitlistModal, setShowWaitlistModal] = useState(false);
            const [isDarkMode, setIsDarkMode] = useState(false);
            const [searchQuery, setSearchQuery] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [dreamStreak, setDreamStreak] = useState(0);
            const [lastDreamDate, setLastDreamDate] = useState(null);
            const [aiThinking, setAiThinking] = useState(false);
            const [currentPrompt, setCurrentPrompt] = useState('');
            const [notifications, setNotifications] = useState([]);
            const [waitlistEmail, setWaitlistEmail] = useState('');
            const [waitlistCount, setWaitlistCount] = useState(0);
            const [isOnWaitlist, setIsOnWaitlist] = useState(false);
            
            const dreamPrompts = [
                "What colors dominated your dream landscape?",
                "Did you encounter any familiar faces from your past?",
                "What emotions did you feel most strongly?",
                "Were you in control of your actions in the dream?",
                "What was the most unusual element of your dream?",
                "Did your dream take place somewhere familiar or unknown?",
                "What sounds or music did you hear in your dream?",
                "Were you flying, falling, or moving in unusual ways?",
                "Did you have any conversations? What were they about?",
                "What objects or symbols stood out to you?"
            ];
            
            useEffect(() => {
                // Load data from localStorage
                const savedDreams = localStorage.getItem('dreamvault_dreams');
                const savedStreak = localStorage.getItem('dreamvault_streak');
                const savedLastDate = localStorage.getItem('dreamvault_last_dream');
                const savedWaitlist = localStorage.getItem('dreamvault_waitlist');
                const savedDarkMode = localStorage.getItem('dreamvault_darkmode');
                
                if (savedDreams) {
                    setDreams(JSON.parse(savedDreams));
                } else {
                    // Sample dreams
                    const sampleDreams = [
                        {
                            id: 1,
                            title: "Flying Over Mountains",
                            content: "I was soaring above snow-capped peaks, feeling completely free. The air was crisp and I could see valleys below filled with golden light.",
                            mood: 'happy',
                            lucid: true,
                            tags: ['flying', 'mountains', 'freedom'],
                            date: '2025-06-28',
                            basicInsight: "Flying dreams often represent freedom and aspirations."
                        },
                        {
                            id: 2,
                            title: "Lost Library",
                            content: "I wandered through endless corridors of books, searching for something I couldn't remember.",
                            mood: 'confused',
                            lucid: false,
                            tags: ['books', 'searching', 'confusion'],
                            date: '2025-06-27',
                            basicInsight: "Library dreams may represent seeking knowledge or answers."
                        }
                    ];
                    setDreams(sampleDreams);
                }
                
                if (savedDarkMode === 'true') {
                    setIsDarkMode(true);
                    document.documentElement.classList.add('dark');
                }
                
                if (savedStreak) setDreamStreak(parseInt(savedStreak));
                if (savedLastDate) setLastDreamDate(new Date(savedLastDate));
                if (savedWaitlist === 'true') setIsOnWaitlist(true);
                // Load actual waitlist count
                const savedCount = localStorage.getItem('dreamvault_waitlist_count');
                if (savedCount) {
                    setWaitlistCount(parseInt(savedCount));
                } else {
                    setWaitlistCount(0); // Start from 0 for actual count
                }
                // Set daily prompt
                const today = new Date().getDate();
                setCurrentPrompt(dreamPrompts[today % dreamPrompts.length]);
            }, []);
            
            useEffect(() => {
                if (dreams.length > 0) {
                    localStorage.setItem('dreamvault_dreams', JSON.stringify(dreams));
                    updateStreak();
                }
            }, [dreams]);
            
            const showNotification = (message, type = 'info') => {
                const notification = { id: Date.now(), message, type };
                setNotifications(prev => [...prev, notification]);
                setTimeout(() => {
                    setNotifications(prev => prev.filter(n => n.id !== notification.id));
                }, 3000);
            };
            
            const updateStreak = () => {
                const today = new Date();
                const todayStr = today.toDateString();
                
                const dreamToday = dreams.some(dream => 
                    new Date(dream.date).toDateString() === todayStr
                );
                
                if (dreamToday) {
                    if (lastDreamDate) {
                        const daysDiff = Math.floor((today - lastDreamDate) / (1000 * 60 * 60 * 24));
                        
                        if (daysDiff === 1) {
                            const newStreak = dreamStreak + 1;
                            setDreamStreak(newStreak);
                            localStorage.setItem('dreamvault_streak', newStreak.toString());
                            
                            if (newStreak % 7 === 0) {
                                showNotification(`ðŸ”¥ Amazing! ${newStreak} day streak!`, 'success');
                            }
                        } else if (daysDiff > 1) {
                            setDreamStreak(1);
                            localStorage.setItem('dreamvault_streak', '1');
                        }
                    } else {
                        setDreamStreak(1);
                        localStorage.setItem('dreamvault_streak', '1');
                        showNotification('ðŸŒ™ Welcome to DreamVault!', 'success');
                    }
                    
                    setLastDreamDate(today);
                    localStorage.setItem('dreamvault_last_dream', today.toISOString());
                }
            };
            
            const toggleDarkMode = () => {
                const newDarkMode = !isDarkMode;
                setIsDarkMode(newDarkMode);
                localStorage.setItem('dreamvault_darkmode', newDarkMode.toString());
                
                if (newDarkMode) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            };
            
            const generateBasicAIAnalysis = async (dream) => {
                setAiThinking(true);
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const basicInsights = [
                    "Dreams often reflect our daily experiences and emotions.",
                    "This dream may represent subconscious thoughts and feelings.",
                    "The symbols in your dream could have personal meaning.",
                    "Dreams help process memories and experiences from your day.",
                    "Your subconscious mind is working through thoughts and emotions."
                ];
                
                setAiThinking(false);
                return {
                    basicInsight: basicInsights[Math.floor(Math.random() * basicInsights.length)]
                };
            };
            
            const addDream = async () => {
                if (!newDream.title || !newDream.content) return;
                
                setIsLoading(true);
                const aiResult = await generateBasicAIAnalysis(newDream);
                
                const dreamToAdd = {
                    ...newDream,
                    id: Date.now(),
                    ...aiResult
                };
                
                if (isEditing) {
                    setDreams(dreams.map(d => d.id === editingId ? dreamToAdd : d));
                    setIsEditing(false);
                    setEditingId(null);
                    showNotification('Dream updated! âœ¨', 'success');
                } else {
                    setDreams([dreamToAdd, ...dreams]);
                    showNotification('New dream saved! ðŸŒ™', 'success');
                }
                
                setNewDream({
                    title: '',
                    content: '',
                    mood: 'neutral',
                    lucid: false,
                    tags: [],
                    date: new Date().toISOString().split('T')[0]
                });
                
                setCurrentView('journal');
                setIsLoading(false);
            };
            
            const editDream = (dream) => {
                setNewDream(dream);
                setIsEditing(true);
                setEditingId(dream.id);
                setCurrentView('add');
            };
            
                 const deleteDream = (id) => {
                setDreams(dreams.filter(d => d.id !== id));
                showNotification('Dream deleted', 'info');
            };

            const joinWaitlist = () => {
                if (!waitlistEmail || !waitlistEmail.includes('@')) {
                    showNotification('Please enter a valid email address', 'error');
                    return;
                }
    
                localStorage.setItem('dreamvault_waitlist', 'true');
                localStorage.setItem('dreamvault_waitlist_email', waitlistEmail);
    
                setIsOnWaitlist(true);
                const newCount = waitlistCount + 1;
                setWaitlistCount(newCount);
    
                // Save the actual count
                localStorage.setItem('dreamvault_waitlist_count', newCount.toString());
    
                setShowWaitlistModal(false);
    
                showNotification('ðŸŽ‰ You\'re on the waitlist! We\'ll notify you when premium launches!', 'success');
            };

            const filteredDreams = dreams.filter(dream =>
                dream.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                dream.content.toLowerCase().includes(searchQuery.toLowerCase()) ||
                (dream.tags && dream.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase())))
            );

            // Simple icons as text
            const MoonIcon = () => React.createElement('span', {}, 'ðŸŒ™');
            const PlusIcon = () => React.createElement('span', {}, 'âž•');
            const SunIcon = () => React.createElement('span', {}, 'â˜€ï¸');
            const ChartIcon = () => React.createElement('span', {}, 'ðŸ“Š');
            const TimelineIcon = () => React.createElement('span', {}, 'ðŸ“ˆ');
            const CrownIcon = () => React.createElement('span', {}, 'ðŸ‘‘');
            const SearchIcon = () => React.createElement('span', {}, 'ðŸ”');
            const StarIcon = () => React.createElement('span', {}, 'â­');
            const EditIcon = () => React.createElement('span', {}, 'âœï¸');
            const DeleteIcon = () => React.createElement('span', {}, 'ðŸ—‘ï¸');
            const BrainIcon = () => React.createElement('span', {}, 'ðŸ§ ');
            const FlameIcon = () => React.createElement('span', {}, 'ðŸ”¥');
            const LightbulbIcon = () => React.createElement('span', {}, 'ðŸ’¡');
            const BellIcon = () => React.createElement('span', {}, 'ðŸ””');
            const UsersIcon = () => React.createElement('span', {}, 'ðŸ‘¥');
            
            return React.createElement('div', { 
                className: `min-h-screen transition-colors duration-300 ${
                    isDarkMode 
                        ? 'dark bg-gray-900' 
                        : 'bg-gradient-to-br from-indigo-50 via-white to-purple-50'
                }` 
            },
                // Notifications
                React.createElement('div', { className: 'fixed top-4 right-4 z-50 space-y-2' },
                    notifications.map(notification =>
                        React.createElement('div', {
                            key: notification.id,
                            className: `notification-slide px-4 py-3 rounded-lg shadow-lg max-w-sm ${
                                notification.type === 'success' ? 'bg-green-500 text-white' :
                                notification.type === 'error' ? 'bg-red-500 text-white' :
                                'bg-blue-500 text-white'
                            }`
                        }, notification.message)
                    )
                ),
                
                // Header
                React.createElement('div', { 
                    className: `shadow-sm border-b transition-colors duration-300 ${
                        isDarkMode 
                            ? 'bg-gray-800 border-gray-700' 
                            : 'bg-white border-gray-100'
                    }` 
                },
                    React.createElement('div', { className: 'max-w-6xl mx-auto px-4 py-4' },
                        React.createElement('div', { className: 'flex items-center justify-between' },
                            React.createElement('div', { className: 'flex items-center space-x-3' },
                                React.createElement('div', { className: 'p-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl' },
                                    React.createElement(MoonIcon)
                                ),
                                React.createElement('div', {},
                                    React.createElement('h1', { 
                                        className: `text-xl font-bold transition-colors duration-300 gradient-text` 
                                    }, 'DreamVault'),
                                    React.createElement('p', { 
                                        className: `text-sm transition-colors duration-300 ${
                                            isDarkMode ? 'text-gray-400' : 'text-gray-500'
                                        }` 
                                    }, 'AI-powered dream journal & analytics')
                                )
                            ),
                            React.createElement('div', { className: 'flex items-center space-x-3' },
                                React.createElement('button', {
                                    onClick: toggleDarkMode,
                                    className: `p-2 rounded-lg transition-colors duration-300 ${
                                        isDarkMode 
                                            ? 'bg-gray-700 text-yellow-400 hover:bg-gray-600' 
                                            : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                    }`
                                },
                                    isDarkMode ? React.createElement(SunIcon) : React.createElement(MoonIcon)
                                ),
                                isOnWaitlist ? 
                                    React.createElement('div', { className: 'flex items-center space-x-2 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium' },
                                        React.createElement(BellIcon),
                                        React.createElement('span', {}, 'On Waitlist')
                                    ) :
                                    React.createElement('button', {
                                        onClick: () => setShowWaitlistModal(true),
                                        className: 'waitlist-glow text-white px-4 py-2 rounded-lg text-sm font-medium hover:scale-105 transition-all'
                                    }, 'Join Waitlist')
                            )
                        )
                    )
                ),

                // Navigation
                React.createElement('div', { 
                    className: `border-b transition-colors duration-300 ${
                        isDarkMode 
                            ? 'bg-gray-800 border-gray-700' 
                            : 'bg-white border-gray-100'
                    }` 
                },
                    React.createElement('div', { className: 'max-w-6xl mx-auto px-4' },
                        React.createElement('div', { className: 'flex space-x-8' },
                            [
                                { key: 'journal', icon: MoonIcon, label: 'My Dreams' },
                                { key: 'add', icon: PlusIcon, label: 'Add Dream' },
                                { key: 'timeline', icon: TimelineIcon, label: 'Timeline' },
                                { key: 'analytics', icon: ChartIcon, label: 'Analytics' }
                            ].map(({ key, icon: IconComponent, label }) =>
                                React.createElement('button', {
                                    key,
                                    onClick: () => setCurrentView(key),
                                    className: `py-4 px-2 border-b-2 font-medium text-sm transition-colors ${
                                        currentView === key
                                            ? 'border-blue-600 text-blue-600'
                                            : `border-transparent hover:text-blue-600 ${
                                                isDarkMode ? 'text-gray-400' : 'text-gray-500'
                                            }`
                                    }`
                                },
                                    React.createElement('div', { className: 'flex items-center space-x-2' },
                                        React.createElement(IconComponent),
                                        React.createElement('span', {}, label)
                                    )
                                )
                            )
                        )
                    )
                ),

                // Main Content
                React.createElement('div', { className: 'max-w-6xl mx-auto px-4 py-8' },
                    // Waitlist banner for all views
                    React.createElement('div', { className: `p-6 rounded-xl border-2 border-dashed mb-6 ${isDarkMode ? 'border-purple-600 bg-purple-900/20' : 'border-purple-300 bg-purple-50'}` },
                        React.createElement('div', { className: 'flex items-center justify-between' },
                            React.createElement('div', { className: 'flex items-center space-x-4' },
                                React.createElement('div', { className: 'waitlist-glow w-12 h-12 rounded-full flex items-center justify-center' },
                                    React.createElement(CrownIcon)
                                ),
                                React.createElement('div', {},
                                    React.createElement('h3', { className: `font-bold text-lg ${isDarkMode ? 'text-white' : 'text-gray-800'}` }, 'Premium Features Coming Soon!'),
                                    React.createElement('p', { className: `text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}` }, `Join ${waitlistCount.toLocaleString()} dreamers on our waitlist`)
                                )
                            ),
                            isOnWaitlist ? 
                                React.createElement('div', { className: 'text-center' },
                                    React.createElement('div', { className: 'text-green-600 font-bold mb-1' }, 'âœ… You\'re on the list!'),
                                    React.createElement('div', { className: `text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}` }, 'We\'ll notify you!')
                                ) :
                                React.createElement('button', {
                                    onClick: () => setShowWaitlistModal(true),
                                    className: 'waitlist-glow text-white px-6 py-3 rounded-lg font-semibold hover:scale-105 transition-all'
                                }, 'Join Waitlist')
                        )
                    ),
                    
                    // Current view content
                    currentView === 'journal' && React.createElement('div', { className: 'space-y-6' },
                        // Daily prompt
                        React.createElement('div', { 
                            className: `p-4 rounded-lg border-l-4 border-blue-400 ${
                                isDarkMode ? 'bg-blue-900/20' : 'bg-blue-50'
                            }` 
                        },
                            React.createElement('div', { className: 'flex items-center space-x-2 mb-2' },
                                React.createElement(LightbulbIcon),
                                React.createElement('span', { className: `font-medium ${isDarkMode ? 'text-blue-300' : 'text-blue-800'}` }, "Today's Dream Prompt")
                            ),
                            React.createElement('p', { className: `text-sm ${isDarkMode ? 'text-blue-200' : 'text-blue-700'}` }, currentPrompt)
                        ),
                        
                        // Dreams list
                        filteredDreams.length === 0 ? 
                            React.createElement('div', { className: `text-center py-12 ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}` },
                                React.createElement('div', { className: 'text-6xl mb-4' }, 'ðŸŒ™'),
                                React.createElement('p', {}, 'No dreams yet. Start recording your dreams!'),
                                React.createElement('p', { className: 'text-sm mt-2' }, 'Use the prompt above to get started')
                            ) :
                            React.createElement('div', { className: 'space-y-6' },
                                filteredDreams.map(dream => 
                                    React.createElement('div', { 
                                        key: dream.id, 
                                        className: `dream-card border rounded-xl p-6 hover:shadow-lg transition-all ${
                                            isDarkMode 
                                                ? 'bg-gray-800 border-gray-700 hover:shadow-gray-900/25' 
                                                : 'bg-white border-gray-200'
                                        }` 
                                    },
                                        React.createElement('div', { className: 'flex items-start justify-between mb-4' },
                                            React.createElement('div', { className: 'flex-1' },
                                                React.createElement('div', { className: 'flex items-center space-x-3 mb-2' },
                                                    React.createElement('h3', { className: `text-lg font-semibold ${isDarkMode ? 'text-white' : 'text-gray-800'}` }, dream.title),
                                                    dream.lucid && React.createElement(StarIcon)
                                                ),
                                                React.createElement('p', { className: `text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}` }, dream.date)
                                            ),
                                            React.createElement('div', { className: 'flex items-center space-x-2' },
                                                React.createElement('button', {
                                                    onClick: () => editDream(dream),
                                                    className: `p-2 rounded-lg hover:text-blue-500 transition-colors ${isDarkMode ? 'text-gray-500 hover:bg-gray-700' : 'text-gray-400 hover:bg-gray-100'}`
                                                }, React.createElement(EditIcon)),
                                                React.createElement('button', {
                                                    onClick: () => deleteDream(dream.id),
                                                    className: `p-2 rounded-lg hover:text-red-500 transition-colors ${isDarkMode ? 'text-gray-500 hover:bg-gray-700' : 'text-gray-400 hover:bg-gray-100'}`
                                                }, React.createElement(DeleteIcon))
                                            )
                                        ),
                                        
                                        React.createElement('p', { className: `mb-4 leading-relaxed ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}` }, dream.content),
                                        
                                        React.createElement('div', { className: 'flex items-center space-x-3 mb-4' },
                                            React.createElement('span', { 
                                                className: `px-3 py-1 rounded-full text-xs font-medium ${
                                                    dream.mood === 'happy' ? 'bg-green-100 text-green-800' :
                                                    dream.mood === 'anxious' ? 'bg-red-100 text-red-800' :
                                                    dream.mood === 'sad' ? 'bg-blue-100 text-blue-800' :
                                                    'bg-gray-100 text-gray-800'
                                                }` 
                                            }, dream.mood),
                                            React.createElement('div', { className: 'flex flex-wrap gap-1' },
                                                (dream.tags || []).map(tag => 
                                                    React.createElement('span', {
                                                        key: tag,
                                                        className: `px-2 py-1 text-xs rounded-full ${
                                                            isDarkMode 
                                                                ? 'bg-blue-900 text-blue-300' 
                                                                : 'bg-blue-100 text-blue-800'
                                                        }`
                                                    }, `#${tag}`)
                                                )
                                            )
                                        ),
                                        
                                        dream.basicInsight && React.createElement('div', { className: `p-4 rounded-lg border-l-4 border-blue-400 ${isDarkMode ? 'bg-blue-900/30' : 'bg-blue-50'}` },
                                            React.createElement('div', { className: 'flex items-center justify-between mb-2' },
                                                React.createElement('div', { className: 'flex items-center space-x-2' },
                                                    React.createElement(BrainIcon),
                                                    React.createElement('span', { className: `text-sm font-medium ${isDarkMode ? 'text-blue-300' : 'text-blue-800'}` }, 'Basic AI Insight')
                                                ),
                                                React.createElement(CrownIcon)
                                            ),
                                            React.createElement('p', { className: `text-sm mb-3 ${isDarkMode ? 'text-blue-200' : 'text-blue-700'}` }, dream.basicInsight),
                                            React.createElement('button', {
                                                onClick: () => setShowWaitlistModal(true),
                                                className: `text-xs font-medium hover:underline ${isDarkMode ? 'text-blue-400 hover:text-blue-300' : 'text-blue-600 hover:text-blue-800'}`
                                            }, 'ðŸ”® Get Advanced Analysis â†’ Join Waitlist')
                                        )
                                    )
                                )
                            )
                    ),
                    
                    // Add Dream View
                    currentView === 'add' && React.createElement('div', { className: 'max-w-2xl mx-auto' },
                        React.createElement('h2', { className: `text-xl font-semibold mb-6 ${isDarkMode ? 'text-white' : 'text-gray-800'}` },
                            isEditing ? 'Edit Dream' : 'Record New Dream'
                        ),
                        
                        React.createElement('div', { className: `border rounded-xl p-6 space-y-6 ${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}` },
                            React.createElement('div', {},
                                React.createElement('label', { className: `block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}` }, 'Dream Title'),
                                React.createElement('input', {
                                    type: 'text',
                                    value: newDream.title,
                                    onChange: (e) => setNewDream({...newDream, title: e.target.value}),
                                    placeholder: 'Give your dream a memorable title...',
                                    className: `w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                                        isDarkMode 
                                            ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' 
                                            : 'bg-white border-gray-200 text-gray-900 placeholder-gray-500'
                                    }`
                                })
                            ),
                            
                            React.createElement('div', {},
                                React.createElement('label', { className: `block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}` }, 'Dream Description'),
                                React.createElement('textarea', {
                                    value: newDream.content,
                                    onChange: (e) => setNewDream({...newDream, content: e.target.value}),
                                    placeholder: 'Describe your dream in detail...',
                                    rows: 6,
                                    className: `w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                                        isDarkMode 
                                            ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' 
                                            : 'bg-white border-gray-200 text-gray-900 placeholder-gray-500'
                                    }`
                                })
                            ),
                            
                            React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4' },
                                React.createElement('div', {},
                                    React.createElement('label', { className: `block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}` }, 'Mood'),
                                    React.createElement('select', {
                                        value: newDream.mood,
                                        onChange: (e) => setNewDream({...newDream, mood: e.target.value}),
                                        className: `w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                                            isDarkMode 
                                                ? 'bg-gray-700 border-gray-600 text-white' 
                                                : 'bg-white border-gray-200 text-gray-900'
                                        }`
                                    },
                                        React.createElement('option', { value: 'happy' }, 'ðŸ˜Š Happy'),
                                        React.createElement('option', { value: 'anxious' }, 'ðŸ˜° Anxious'),
                                        React.createElement('option', { value: 'sad' }, 'ðŸ˜¢ Sad'),
                                        React.createElement('option', { value: 'excited' }, 'ðŸ¤© Excited'),
                                        React.createElement('option', { value: 'neutral' }, 'ðŸ˜ Neutral'),
                                        React.createElement('option', { value: 'confused' }, 'ðŸ˜• Confused')
                                    )
                                ),
                                
                                React.createElement('div', {},
                                    React.createElement('label', { className: `block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}` }, 'Date'),
                                    React.createElement('input', {
                                        type: 'date',
                                        value: newDream.date,
                                        onChange: (e) => setNewDream({...newDream, date: e.target.value}),
                                        className: `w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                                            isDarkMode 
                                                ? 'bg-gray-700 border-gray-600 text-white' 
                                                : 'bg-white border-gray-200 text-gray-900'
                                        }`
                                    })
                                )
                            ),
                            
                            React.createElement('div', { className: 'flex items-center space-x-3' },
                                React.createElement('input', {
                                    type: 'checkbox',
                                    checked: newDream.lucid,
                                    onChange: (e) => setNewDream({...newDream, lucid: e.target.checked}),
                                    className: 'w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500'
                                }),
                                React.createElement('span', { className: `text-sm ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}` }, 'Lucid Dream'),
                                React.createElement(StarIcon)
                            ),
                            
                            React.createElement('div', {},
                                React.createElement('label', { className: `block text-sm font-medium mb-2 ${isDarkMode ? 'text-gray-300' : 'text-gray-700'}` }, 'Tags'),
                                React.createElement('input', {
                                    type: 'text',
                                    value: (newDream.tags || []).join(', '),
                                    onChange: (e) => setNewDream({...newDream, tags: e.target.value.split(',').map(t => t.trim()).filter(t => t)}),
                                    placeholder: 'flying, water, family...',
                                    className: `w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${
                                        isDarkMode 
                                            ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' 
                                            : 'bg-white border-gray-200 text-gray-900 placeholder-gray-500'
                                    }`
                                })
                            ),
                            
                            React.createElement('button', {
                                onClick: addDream,
                                disabled: isLoading || !newDream.title || !newDream.content,
                                className: 'w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:from-purple-700 hover:to-blue-700 transition-all disabled:opacity-50'
                            },
                                isLoading ? 
                                    React.createElement('span', { className: 'flex items-center justify-center space-x-2' },
                                        React.createElement(BrainIcon),
                                        React.createElement('span', {}, 'Analyzing...')
                                    ) :
                                    (isEditing ? 'Update Dream' : 'Save Dream')
                            )
                        )
                    ),
                    
                    // Analytics View
                    currentView === 'analytics' && React.createElement('div', { className: 'space-y-6' },
                        React.createElement('div', { className: 'flex items-center justify-between mb-6' },
                            React.createElement('h2', { className: `text-xl font-semibold ${isDarkMode ? 'text-white' : 'text-gray-800'}` }, 'Dream Analytics'),
                            React.createElement('button', {
                                onClick: () => setShowWaitlistModal(true),
                                className: 'waitlist-glow text-white px-4 py-2 rounded-lg hover:scale-105 transition-all'
                            }, 'ðŸ‘‘ Join Waitlist for Premium Analytics')
                        ),
                        
                        React.createElement('div', { className: 'grid grid-cols-2 md:grid-cols-4 gap-4' },
                            React.createElement('div', { className: `p-4 rounded-xl text-center border ${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}` },
                                React.createElement('div', { className: 'text-2xl font-bold text-blue-600' }, dreams.length),
                                React.createElement('div', { className: `text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}` }, 'Total Dreams')
                            ),
                            React.createElement('div', { className: `p-4 rounded-xl text-center border ${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}` },
                                React.createElement('div', { className: 'text-2xl font-bold text-green-600' }, dreams.filter(d => d.lucid).length),
                                React.createElement('div', { className: `text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}` }, 'Lucid Dreams')
                            ),
                            React.createElement('div', { className: `p-4 rounded-xl text-center border ${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}` },
                                React.createElement('div', { className: 'text-2xl font-bold text-purple-600' }, new Set(dreams.flatMap(d => d.tags || [])).size),
                                React.createElement('div', { className: `text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}` }, 'Themes')
                            ),
                            React.createElement('div', { className: `p-4 rounded-xl text-center border ${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}` },
                                React.createElement('div', { className: 'text-2xl font-bold text-orange-600' }, dreamStreak),
                                React.createElement('div', { className: `text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}` }, 'Day Streak')
                            )
                        ),
                        
                        React.createElement('div', { className: `border-2 border-dashed rounded-xl p-8 text-center ${isDarkMode ? 'border-purple-600 bg-purple-900/20' : 'border-purple-300 bg-purple-50'}` },
                            React.createElement('div', { className: 'text-6xl mb-4' }, 'ðŸ‘‘'),
                            React.createElement('h3', { className: `text-2xl font-bold mb-2 ${isDarkMode ? 'text-white' : 'text-gray-800'}` }, 'Premium Analytics Coming Soon!'),
                            React.createElement('p', { className: `text-lg mb-4 ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}` }, 
                                'Advanced emotion charts, dream scoring, pattern recognition & more!'
                            ),
                            React.createElement('div', { className: 'flex items-center justify-center space-x-2 mb-6' },
                                React.createElement(UsersIcon),
                                React.createElement('span', { className: 'font-bold' }, waitlistCount.toLocaleString()),
                                React.createElement('span', { className: `${isDarkMode ? 'text-gray-400' : 'text-gray-600'}` }, 'dreamers waiting!')
                            ),
                            !isOnWaitlist && React.createElement('button', {
                                onClick: () => setShowWaitlistModal(true),
                                className: 'waitlist-glow text-white px-8 py-4 rounded-lg text-lg font-bold hover:scale-105 transition-all'
                            }, 'Join Waitlist - Be First! ðŸš€')
                        )
                    ),
                    
                    // Timeline View
                    currentView === 'timeline' && React.createElement('div', { className: 'space-y-6' },
                        React.createElement('h2', { className: `text-xl font-semibold ${isDarkMode ? 'text-white' : 'text-gray-800'}` }, 'Dream Timeline'),
                        
                        React.createElement('div', { className: `border-2 border-dashed rounded-xl p-8 text-center ${isDarkMode ? 'border-purple-600 bg-purple-900/20' : 'border-purple-300 bg-purple-50'}` },
                            React.createElement('div', { className: 'text-6xl mb-4' }, 'ðŸ“ˆ'),
                            React.createElement('h3', { className: `text-xl font-bold mb-2 ${isDarkMode ? 'text-white' : 'text-gray-800'}` }, 'Advanced Timeline Coming Soon!'),
                            React.createElement('p', { className: `mb-4 ${isDarkMode ? 'text-gray-300' : 'text-gray-600'}` }, 
                                'See dream patterns, emotional trends, and progression over time with interactive charts.'
                            ),
                            React.createElement('button', {
                                onClick: () => setShowWaitlistModal(true),
                                className: 'waitlist-glow text-white px-6 py-3 rounded-lg font-semibold hover:scale-105 transition-all'
                            }, 'Join Waitlist for Timeline Features')
                        ),
                        
                        dreams.length > 0 && React.createElement('div', { className: 'space-y-4' },
                            dreams.slice(0, 3).map(dream => 
                                React.createElement('div', { 
                                    key: dream.id,
                                    className: `p-4 rounded-lg border ${isDarkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'}`
                                },
                                    React.createElement('h3', { className: `font-medium ${isDarkMode ? 'text-white' : 'text-gray-800'}` }, dream.title),
                                    React.createElement('p', { className: `text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}` }, dream.date)
                                )
                            )
                        )
                    )
                ),

                // Floating Add Button (Mobile)
                React.createElement('button', {
                    onClick: () => setCurrentView('add'),
                    className: 'fixed bottom-6 right-6 bg-gradient-to-r from-purple-600 to-blue-600 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all md:hidden transform hover:scale-110'
                },
                    React.createElement(PlusIcon)
                ),

                // Waitlist Modal
                showWaitlistModal && React.createElement('div', { className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4' },
                    React.createElement('div', { className: `rounded-2xl p-8 max-w-md w-full ${isDarkMode ? 'bg-gray-800' : 'bg-white'}` },
                        React.createElement('div', { className: 'text-center mb-6' },
                            React.createElement('div', { className: 'waitlist-glow w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center text-3xl' },
                                React.createElement(CrownIcon)
                            ),
                            React.createElement('h2', { className: `text-2xl font-bold mb-2 ${isDarkMode ? 'text-white' : 'text-gray-800'}` }, 'Join the Premium Waitlist'),
                            React.createElement('p', { className: `${isDarkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'Be first to access advanced dream analytics!')
                        ),
                        
                        React.createElement('div', { className: `p-4 rounded-lg mb-6 ${isDarkMode ? 'bg-blue-900/30' : 'bg-blue-50'}` },
                            React.createElement('h3', { className: `font-semibold mb-3 ${isDarkMode ? 'text-blue-300' : 'text-blue-800'}` }, 'Coming Soon:'),
                            React.createElement('div', { className: 'space-y-2 text-sm' },
                                React.createElement('div', { className: `${isDarkMode ? 'text-blue-200' : 'text-blue-700'}` }, 'ðŸ§  Advanced AI dream analysis'),
                                React.createElement('div', { className: `${isDarkMode ? 'text-blue-200' : 'text-blue-700'}` }, 'ðŸ“Š Emotion charts & scoring'),
                                React.createElement('div', { className: `${isDarkMode ? 'text-blue-200' : 'text-blue-700'}` }, 'ðŸŽ­ Dream archetypes & patterns'),
                                React.createElement('div', { className: `${isDarkMode ? 'text-blue-200' : 'text-blue-700'}` }, 'ðŸ“ˆ Timeline & trend analysis')
                            )
                        ),
                        
                        React.createElement('div', { className: `text-center mb-6 p-3 rounded-lg ${isDarkMode ? 'bg-gray-700' : 'bg-gray-100'}` },
                            React.createElement('div', { className: 'flex items-center justify-center space-x-2 mb-1' },
                                React.createElement(UsersIcon),
                                React.createElement('span', { className: `font-bold ${isDarkMode ? 'text-white' : 'text-gray-800'}` }, waitlistCount.toLocaleString())
                            ),
                            React.createElement('p', { className: `text-sm ${isDarkMode ? 'text-gray-400' : 'text-gray-600'}` }, 'dreamers already waiting!')
                        ),
                        
                        React.createElement('div', { className: 'space-y-4' },
                            React.createElement('input', {
                                type: 'email',
                                placeholder: 'Enter your email',
                                value: waitlistEmail,
                                onChange: (e) => setWaitlistEmail(e.target.value),
                                className: `w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 ${
                                    isDarkMode 
                                        ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' 
                                        : 'bg-white border-gray-300 text-gray-900 placeholder-gray-500'
                                }`
                            }),
                            React.createElement('button', {
                                onClick: joinWaitlist,
                                className: 'w-full waitlist-glow text-white py-3 rounded-lg font-semibold transition-all transform hover:scale-105'
                            }, 'Join Waitlist - Get Notified First! ðŸš€'),
                            React.createElement('button', {
                                onClick: () => setShowWaitlistModal(false),
                                className: `w-full py-2 ${isDarkMode ? 'text-gray-400' : 'text-gray-500'}`
                            }, 'Maybe Later')
                        )
                    )
                )
            );
        }

        ReactDOM.render(React.createElement(DreamJournalApp), document.getElementById('root'));
    </script>
    
    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
