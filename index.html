<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamVault - Your Personal Dream Journal</title>
    <meta name="description" content="Record, analyze, and understand your dreams with AI-powered insights">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#6366f1">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="DreamVault">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🌙</text></svg>">
    
    <!-- React and Dependencies -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        .ad-banner {
            background: linear-gradient(45deg, #f3f4f6, #e5e7eb);
            border: 1px dashed #d1d5db;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .loading {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Lucide icons as components
        const Plus = () => React.createElement('svg', {
            xmlns: 'http://www.w3.org/2000/svg',
            width: 24, height: 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: 2,
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, 
            React.createElement('path', { d: 'm9 12 2 2 4-4' }),
            React.createElement('path', { d: 'M21 12c.552 0 1-.448 1-1s-.448-1-1-1' }),
            React.createElement('path', { d: 'M3 12c0 5.523 4.477 10 10 10s10-4.477 10-10S18.523 2 12 2 2 6.477 2 12' })
        );
        
        const Moon = () => React.createElement('svg', {
            xmlns: 'http://www.w3.org/2000/svg',
            width: 24, height: 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: 2,
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, 
            React.createElement('path', { d: 'M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z' })
        );
        
        const BarChart3 = () => React.createElement('svg', {
            xmlns: 'http://www.w3.org/2000/svg',
            width: 24, height: 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: 2,
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, 
            React.createElement('path', { d: 'M3 3v18h18' }),
            React.createElement('path', { d: 'M18 17V9' }),
            React.createElement('path', { d: 'M13 17V5' }),
            React.createElement('path', { d: 'M8 17v-3' })
        );
        
        const Crown = () => React.createElement('svg', {
            xmlns: 'http://www.w3.org/2000/svg',
            width: 24, height: 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: 2,
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, 
            React.createElement('path', { d: 'm2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm0 16h20' })
        );
        
        const Search = () => React.createElement('svg', {
            xmlns: 'http://www.w3.org/2000/svg',
            width: 24, height: 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: 2,
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, 
            React.createElement('circle', { cx: 11, cy: 11, r: 8 }),
            React.createElement('path', { d: 'm21 21-4.35-4.35' })
        );
        
        const Star = () => React.createElement('svg', {
            xmlns: 'http://www.w3.org/2000/svg',
            width: 24, height: 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: 2,
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, 
            React.createElement('polygon', { points: '12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26' })
        );
        
        const Edit3 = () => React.createElement('svg', {
            xmlns: 'http://www.w3.org/2000/svg',
            width: 24, height: 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: 2,
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, 
            React.createElement('path', { d: 'M12 20h9' }),
            React.createElement('path', { d: 'M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z' })
        );
        
        const Trash2 = () => React.createElement('svg', {
            xmlns: 'http://www.w3.org/2000/svg',
            width: 24, height: 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: 2,
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, 
            React.createElement('path', { d: 'M3 6h18' }),
            React.createElement('path', { d: 'M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6' }),
            React.createElement('path', { d: 'M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2' })
        );
        
        const Brain = () => React.createElement('svg', {
            xmlns: 'http://www.w3.org/2000/svg',
            width: 24, height: 24,
            viewBox: '0 0 24 24',
            fill: 'none',
            stroke: 'currentColor',
            strokeWidth: 2,
            strokeLinecap: 'round',
            strokeLinejoin: 'round'
        }, 
            React.createElement('path', { d: 'M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z' }),
            React.createElement('path', { d: 'M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z' }),
            React.createElement('path', { d: 'M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4' }),
            React.createElement('path', { d: 'M17.599 6.5a3 3 0 0 0 .399-1.375' }),
            React.createElement('path', { d: 'M6.003 5.125A3 3 0 0 0 6.401 6.5' }),
            React.createElement('path', { d: 'M3.477 10.896a4 4 0 0 1 .585-.396' }),
            React.createElement('path', { d: 'M19.938 10.5a4 4 0 0 1 .585.396' }),
            React.createElement('path', { d: 'M6 18a4 4 0 0 1-1.967-.516' }),
            React.createElement('path', { d: 'M19.967 17.484A4 4 0 0 1 18 18' })
        );

        const DreamJournalApp = () => {
            const [currentView, setCurrentView] = useState('journal');
            const [dreams, setDreams] = useState([]);
            const [newDream, setNewDream] = useState({
                title: '',
                content: '',
                mood: 'neutral',
                lucid: false,
                tags: [],
                date: new Date().toISOString().split('T')[0]
            });
            const [isEditing, setIsEditing] = useState(false);
            const [editingId, setEditingId] = useState(null);
            const [isPremium, setIsPremium] = useState(false);
            const [showPremiumModal, setShowPremiumModal] = useState(false);
            const [searchQuery, setSearchQuery] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [showAd, setShowAd] = useState(true);
            
            useEffect(() => {
                // Load data from localStorage
                const savedDreams = localStorage.getItem('dreamvault_dreams');
                const savedPremium = localStorage.getItem('dreamvault_premium');
                
                if (savedDreams) {
                    setDreams(JSON.parse(savedDreams));
                } else {
                    // Sample dreams for demo
                    const sampleDreams = [
                        {
                            id: 1,
                            title: "Flying Over Mountains",
                            content: "I was soaring above snow-capped peaks, feeling completely free. The air was crisp and I could see valleys below filled with golden light.",
                            mood: 'happy',
                            lucid: true,
                            tags: ['flying', 'mountains', 'freedom'],
                            date: '2025-06-28',
                            aiInsight: "Flying dreams often represent a desire for freedom and escape from limitations. The mountains suggest overcoming obstacles.",
                            fullAnalysis: "This dream indicates a strong desire for personal freedom and the ability to rise above current challenges. The mountain imagery suggests you're working through significant obstacles in your life."
                        }
                    ];
                    setDreams(sampleDreams);
                }
                
                if (savedPremium === 'true') {
                    setIsPremium(true);
                    setShowAd(false);
                }
            }, []);
            
            // Save to localStorage whenever dreams change
            useEffect(() => {
                localStorage.setItem('dreamvault_dreams', JSON.stringify(dreams));
            }, [dreams]);
            
            const generateAIInsight = async (dream) => {
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const insights = [
                    "This dream may reflect your subconscious processing of recent experiences and emotions.",
                    "The symbols in this dream suggest personal growth, transformation, and inner wisdom.",
                    "This type of dream often indicates a need for emotional balance and self-reflection.",
                    "Your dream suggests you're working through important life decisions and changes."
                ];
                
                const fullAnalyses = [
                    "Your subconscious mind is actively processing recent experiences, particularly those involving relationships and personal growth. The dream symbols suggest you're integrating new perspectives.",
                    "This dream indicates a period of significant personal transformation. The imagery suggests you're developing new aspects of your personality and discovering hidden strengths.",
                    "The emotional tone of this dream reflects your current need for balance and stability. Your subconscious is working to harmonize different aspects of your life."
                ];
                
                return {
                    insight: insights[Math.floor(Math.random() * insights.length)],
                    fullAnalysis: fullAnalyses[Math.floor(Math.random() * fullAnalyses.length)]
                };
            };
            
            const addDream = async () => {
                if (!newDream.title || !newDream.content) return;
                
                setIsLoading(true);
                
                const aiResult = await generateAIInsight(newDream);
                
                const dreamToAdd = {
                    ...newDream,
                    id: Date.now(),
                    aiInsight: aiResult.insight,
                    fullAnalysis: aiResult.fullAnalysis
                };
                
                if (isEditing) {
                    setDreams(dreams.map(d => d.id === editingId ? dreamToAdd : d));
                    setIsEditing(false);
                    setEditingId(null);
                } else {
                    setDreams([dreamToAdd, ...dreams]);
                }
                
                setNewDream({
                    title: '',
                    content: '',
                    mood: 'neutral',
                    lucid: false,
                    tags: [],
                    date: new Date().toISOString().split('T')[0]
                });
                
                setCurrentView('journal');
                setIsLoading(false);
            };
            
            const editDream = (dream) => {
                setNewDream(dream);
                setIsEditing(true);
                setEditingId(dream.id);
                setCurrentView('add');
            };
            
            const deleteDream = (id) => {
                setDreams(dreams.filter(d => d.id !== id));
            };
            
            const upgradeToPremium = () => {
                setIsPremium(true);
                localStorage.setItem('dreamvault_premium', 'true');
                setShowPremiumModal(false);
                setShowAd(false);
                alert('Welcome to Premium! 🎉 All features unlocked!');
            };
            
            const filteredDreams = dreams.filter(dream =>
                dream.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                dream.content.toLowerCase().includes(searchQuery.toLowerCase()) ||
                dream.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()))
            );
            
            const AdBanner = () => (
                !isPremium && showAd && React.createElement('div', { className: 'ad-banner' },
                    React.createElement('div', { className: 'text-sm text-gray-600 mb-2' }, 'Advertisement'),
                    React.createElement('div', { className: 'text-lg font-semibold text-gray-800 mb-2' }, 
                        '🌟 Upgrade to Premium for Ad-Free Experience!'
                    ),
                    React.createElement('button', {
                        onClick: () => setShowPremiumModal(true),
                        className: 'bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors'
                    }, 'Remove Ads - €2.99/month')
                )
            );
            
            const PremiumModal = () => (
                React.createElement('div', { className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4' },
                    React.createElement('div', { className: 'bg-white rounded-2xl p-6 max-w-md w-full' },
                        React.createElement('div', { className: 'text-center mb-6' },
                            React.createElement(Crown, { className: 'w-12 h-12 text-yellow-500 mx-auto mb-3' }),
                            React.createElement('h2', { className: 'text-2xl font-bold text-gray-800' }, 'Unlock Premium'),
                            React.createElement('p', { className: 'text-gray-600 mt-2' }, 'Get deeper insights into your dreams')
                        ),
                        React.createElement('div', { className: 'space-y-3 mb-6' },
                            React.createElement('div', { className: 'flex items-center space-x-3' },
                                React.createElement(Brain, { className: 'w-5 h-5 text-blue-500' }),
                                React.createElement('span', { className: 'text-gray-700' }, 'Advanced AI dream analysis')
                            ),
                            React.createElement('div', { className: 'flex items-center space-x-3' },
                                React.createElement(BarChart3, { className: 'w-5 h-5 text-green-500' }),
                                React.createElement('span', { className: 'text-gray-700' }, 'Detailed pattern recognition')
                            ),
                            React.createElement('div', { className: 'flex items-center space-x-3' },
                                React.createElement(Star, { className: 'w-5 h-5 text-yellow-500' }),
                                React.createElement('span', { className: 'text-gray-700' }, 'Ad-free experience')
                            )
                        ),
                        React.createElement('div', { className: 'bg-green-50 border border-green-200 rounded-lg p-4 mb-6' },
                            React.createElement('div', { className: 'flex items-center space-x-2 mb-2' },
                                React.createElement('span', { className: 'font-semibold text-green-800' }, 'Special Launch Price')
                            ),
                            React.createElement('p', { className: 'text-green-700 text-sm' }, 
                                'Get your first month for just €0.99! Then €2.99/month.'
                            )
                        ),
                        React.createElement('div', { className: 'space-y-3' },
                            React.createElement('button', {
                                onClick: upgradeToPremium,
                                className: 'w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 rounded-xl font-semibold hover:from-purple-700 hover:to-blue-700 transition-all'
                            }, 'Start Free Trial - €0.99/month'),
                            React.createElement('button', {
                                onClick: () => setShowPremiumModal(false),
                                className: 'w-full text-gray-500 py-2'
                            }, 'Maybe Later')
                        )
                    )
                )
            );

            const renderJournal = () => (
                React.createElement('div', { className: 'space-y-4' },
                    React.createElement(AdBanner),
                    React.createElement('div', { className: 'flex items-center justify-between' },
                        React.createElement('h2', { className: 'text-xl font-semibold text-gray-800' }, 'Your Dreams'),
                        React.createElement('div', { className: 'flex items-center space-x-2' },
                            React.createElement('div', { className: 'relative' },
                                React.createElement(Search, { className: 'w-4 h-4 absolute left-3 top-3 text-gray-400' }),
                                React.createElement('input', {
                                    type: 'text',
                                    placeholder: 'Search dreams...',
                                    value: searchQuery,
                                    onChange: (e) => setSearchQuery(e.target.value),
                                    className: 'pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                                })
                            )
                        )
                    ),
                    filteredDreams.length === 0 ? 
                        React.createElement('div', { className: 'text-center py-12 text-gray-500' },
                            React.createElement(Moon, { className: 'w-16 h-16 mx-auto mb-4 text-gray-300' }),
                            React.createElement('p', {}, 'No dreams yet. Start recording your dreams!')
                        ) :
                        React.createElement('div', { className: 'space-y-4' },
                            filteredDreams.map(dream => 
                                React.createElement('div', { 
                                    key: dream.id, 
                                    className: 'bg-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-shadow' 
                                },
                                    React.createElement('div', { className: 'flex items-start justify-between mb-3' },
                                        React.createElement('div', { className: 'flex-1' },
                                            React.createElement('div', { className: 'flex items-center space-x-2 mb-2' },
                                                React.createElement('h3', { className: 'font-semibold text-gray-800' }, dream.title),
                                                dream.lucid && React.createElement(Star, { className: 'w-4 h-4 text-yellow-500' })
                                            ),
                                            React.createElement('p', { className: 'text-sm text-gray-500 mb-2' }, dream.date)
                                        ),
                                        React.createElement('div', { className: 'flex items-center space-x-2' },
                                            React.createElement('button', {
                                                onClick: () => editDream(dream),
                                                className: 'p-1 text-gray-400 hover:text-blue-500'
                                            }, React.createElement(Edit3, { className: 'w-4 h-4' })),
                                            React.createElement('button', {
                                                onClick: () => deleteDream(dream.id),
                                                className: 'p-1 text-gray-400 hover:text-red-500'
                                            }, React.createElement(Trash2, { className: 'w-4 h-4' }))
                                        )
                                    ),
                                    React.createElement('p', { className: 'text-gray-700 mb-3 leading-relaxed' }, dream.content),
                                    React.createElement('div', { className: 'flex items-center justify-between mb-4' },
                                        React.createElement('div', { className: 'flex items-center space-x-3' },
                                            React.createElement('span', { 
                                                className: `px-3 py-1 rounded-full text-xs font-medium ${
                                                    dream.mood === 'happy' ? 'bg-green-100 text-green-800' :
                                                    dream.mood === 'anxious' ? 'bg-red-100 text-red-800' :
                                                    dream.mood === 'sad' ? 'bg-blue-100 text-blue-800' :
                                                    'bg-gray-100 text-gray-800'
                                                }` 
                                            }, dream.mood),
                                            React.createElement('div', { className: 'flex flex-wrap gap-1' },
                                                dream.tags.map(tag => 
                                                    React.createElement('span', {
                                                        key: tag,
                                                        className: 'px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full'
                                                    }, `#${tag}`)
                                                )
                                            )
                                        )
                                    ),
                                    dream.aiInsight && React.createElement('div', { className: 'p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400' },
                                        React.createElement('div', { className: 'flex items-center space-x-2 mb-1' },
                                            React.createElement(Brain, { className: 'w-4 h-4 text-blue-600' }),
                                            React.createElement('span', { className: 'text-sm font-medium text-blue-800' }, 'AI Insight'),
                                            !isPremium && React.createElement(Crown, { className: 'w-4 h-4 text-yellow-500' })
                                        ),
                                        React.createElement('p', { className: 'text-sm text-blue-700' },
                                            isPremium ? (dream.fullAnalysis || dream.aiInsight) : dream.aiInsight
                                        ),
                                        !isPremium && React.createElement('button', {
                                            onClick: () => setShowPremiumModal(true),
                                            className: 'text-xs text-blue-600 hover:text-blue-800 mt-1 font-medium'
                                        }, 'Unlock Full Analysis →')
                                    )
                                )
                            )
                        )
                )
            );

            const renderAddDream = () => (
                React.createElement('div', { className: 'max-w-2xl mx-auto' },
                    React.createElement('h2', { className: 'text-xl font-semibold text-gray-800 mb-6' },
                        isEditing ? 'Edit Dream' : 'Record New Dream'
                    ),
                    React.createElement('div', { className: 'bg-white border border-gray-200 rounded-xl p-6 space-y-4' },
                        React.createElement('div', {},
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Dream Title'),
                            React.createElement('input', {
                                type: 'text',
                                value: newDream.title,
                                onChange: (e) => setNewDream({...newDream, title: e.target.value}),
                                placeholder: 'Give your dream a title...',
                                className: 'w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                            })
                        ),
                        React.createElement('div', {},
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Dream Description'),
                            React.createElement('textarea', {
                                value: newDream.content,
                                onChange: (e) => setNewDream({...newDream, content: e.target.value}),
                                placeholder: 'Describe your dream in detail...',
                                rows: 6,
                                className: 'w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                            })
                        ),
                        React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4' },
                            React.createElement('div', {},
                                React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Mood'),
                                React.createElement('select', {
                                    value: newDream.mood,
                                    onChange: (e) => setNewDream({...newDream, mood: e.target.value}),
                                    className: 'w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                                },
                                    React.createElement('option', { value: 'happy' }, 'Happy 😊'),
                                    React.createElement('option', { value: 'anxious' }, 'Anxious 😰'),
                                    React.createElement('option', { value: 'sad' }, 'Sad 😢'),
                                    React.createElement('option', { value: 'excited' }, 'Excited 🤩'),
                                    React.createElement('option', { value: 'neutral' }, 'Neutral 😐'),
                                    React.createElement('option', { value: 'confused' }, 'Confused 😕')
                                )
                            ),
                            React.createElement('div', {},
                                React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Date'),
                                React.createElement('input', {
                                    type: 'date',
                                    value: newDream.date,
                                    onChange: (e) => setNewDream({...newDream, date: e.target.value}),
                                    className: 'w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                                })
                            )
                        ),
                        React.createElement('div', { className: 'flex items-center space-x-4' },
                            React.createElement('label', { className: 'flex items-center space-x-2 cursor-pointer' },
                                React.createElement('input', {
                                    type: 'checkbox',
                                    checked: newDream.lucid,
                                    onChange: (e) => setNewDream({...newDream, lucid: e.target.checked}),
                                    className: 'w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500'
                                }),
                                React.createElement('span', { className: 'text-sm text-gray-700' }, 'Lucid Dream'),
                                React.createElement(Star, { className: 'w-4 h-4 text-yellow-500' })
                            )
                        ),
                        React.createElement('div', {},
                            React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Tags (comma separated)'),
                            React.createElement('input', {
                                type: 'text',
                                value: newDream.tags.join(', '),
                                onChange: (e) => setNewDream({...newDream, tags: e.target.value.split(',').map(t => t.trim()).filter(t => t)}),
                                placeholder: 'flying, water, family, work...',
                                className: 'w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent'
                            })
                        ),
                        React.createElement('div', { className: 'flex space-x-3 pt-4' },
                            React.createElement('button', {
                                onClick: addDream,
                                disabled: isLoading,
                                className: 'flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50'
                            },
                                isLoading ? 
                                    React.createElement('span', { className: 'flex items-center justify-center' },
                                        React.createElement('div', { className: 'loading mr-2' }, '🧠'),
                                        'Analyzing Dream...'
                                    ) :
                                    (isEditing ? 'Update Dream' : 'Save Dream')
                            )
                        )
                    )
                )
            );

            const renderAnalytics = () => {
                const moodStats = dreams.reduce((acc, dream) => {
                    acc[dream.mood] = (acc[dream.mood] || 0) + 1;
                    return acc;
                }, {});
                
                const tagStats = dreams.flatMap(d => d.tags)
                    .reduce((acc, tag) => {
                        acc[tag] = (acc[tag] || 0) + 1;
                        return acc;
                    }, {});
                
                const topTags = Object.entries(tagStats).sort(([,a], [,b]) => b - a).slice(0, 5);
                
                return React.createElement('div', { className: 'space-y-6' },
                    React.createElement(AdBanner),
                    React.createElement('div', { className: 'flex items-center justify-between' },
                        React.createElement('h2', { className: 'text-xl font-semibold text-gray-800' }, 'Dream Analytics'),
                        !isPremium && React.createElement('button', {
                            onClick: () => setShowPremiumModal(true),
                            className: 'flex items-center space-x-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all'
                        },
                            React.createElement(Crown, { className: 'w-4 h-4' }),
                            React.createElement('span', {}, 'Upgrade for Advanced Analytics')
                        )
                    ),
                    React.createElement('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-6' },
                        React.createElement('div', { className: 'bg-white border border-gray-200 rounded-xl p-6' },
                            React.createElement('h3', { className: 'font-semibold text-gray-800 mb-4 flex items-center' },
                                React.createElement(BarChart3, { className: 'w-5 h-5 mr-2 text-blue-600' }),
                                'Mood Distribution'
                            ),
                            React.createElement('div', { className: 'space-y-3' },
                                Object.entries(moodStats).map(([mood, count]) =>
                                    React.createElement('div', { 
                                        key: mood, 
                                        className: 'flex items-center justify-between' 
                                    },
                                        React.createElement('span', { className: 'capitalize text-gray-700' }, mood),
                                        React.createElement('div', { className: 'flex items-center space-x-2' },
                                            React.createElement('div', { className: 'w-24 bg-gray-200 rounded-full h-2' },
                                                React.createElement('div', {
                                                    className: 'bg-blue-600 h-2 rounded-full',
                                                    style: { width: `${(count / dreams.length) * 100}%` }
                                                })
                                            ),
                                            React.createElement('span', { className: 'text-sm text-gray-500 w-8' }, count)
                                        )
                                    )
                                )
                            )
                        ),
                        React.createElement('div', { className: 'bg-white border border-gray-200 rounded-xl p-6' },
                            React.createElement('h3', { className: 'font-semibold text-gray-800 mb-4 flex items-center' },
                                React.createElement(BarChart3, { className: 'w-5 h-5 mr-2 text-green-600' }),
                                'Top Dream Themes'
                            ),
                            React.createElement('div', { className: 'space-y-3' },
                                topTags.map(([tag, count]) =>
                                    React.createElement('div', { 
                                        key: tag, 
                                        className: 'flex items-center justify-between' 
                                    },
                                        React.createElement('span', { className: 'text-gray-700' }, `#${tag}`),
                                        React.createElement('span', { className: 'bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-sm' }, count)
                                    )
                                )
                            )
                        )
                    ),
                    React.createElement('div', { className: 'bg-white border border-gray-200 rounded-xl p-6' },
                        React.createElement('h3', { className: 'font-semibold text-gray-800 mb-4' }, 'Dream Summary'),
                        React.createElement('div', { className: 'grid grid-cols-2 md:grid-cols-4 gap-4 text-center' },
                            React.createElement('div', {},
                                React.createElement('div', { className: 'text-2xl font-bold text-blue-600' }, dreams.length),
                                React.createElement('div', { className: 'text-sm text-gray-500' }, 'Total Dreams')
                            ),
                            React.createElement('div', {},
                                React.createElement('div', { className: 'text-2xl font-bold text-green-600' }, 
                                    dreams.filter(d => d.lucid).length
                                ),
                                React.createElement('div', { className: 'text-sm text-gray-500' }, 'Lucid Dreams')
                            ),
                            React.createElement('div', {},
                                React.createElement('div', { className: 'text-2xl font-bold text-purple-600' }, 
                                    new Set(dreams.flatMap(d => d.tags)).size
                                ),
                                React.createElement('div', { className: 'text-sm text-gray-500' }, 'Unique Themes')
                            ),
                            React.createElement('div', {},
                                React.createElement('div', { className: 'text-2xl font-bold text-orange-600' }, 
                                    dreams.length > 0 ? Math.round(dreams.reduce((acc, d) => acc + d.content.length, 0) / dreams.length) : 0
                                ),
                                React.createElement('div', { className: 'text-sm text-gray-500' }, 'Avg. Length')
                            )
                        )
                    ),
                    !isPremium && React.createElement('div', { className: 'bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-xl p-6 text-center' },
                        React.createElement(Crown, { className: 'w-12 h-12 text-yellow-500 mx-auto mb-3' }),
                        React.createElement('h3', { className: 'font-semibold text-gray-800 mb-2' }, 'Unlock Advanced Analytics'),
                        React.createElement('p', { className: 'text-gray-600 mb-4' }, 'Get detailed pattern analysis, dream interpretation trends, and personalized insights.'),
                        React.createElement('button', {
                            onClick: () => setShowPremiumModal(true),
                            className: 'bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all'
                        }, 'Upgrade Now')
                    )
                );
            };

            return React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50' },
                // Header
                React.createElement('div', { className: 'bg-white shadow-sm border-b border-gray-100' },
                    React.createElement('div', { className: 'max-w-6xl mx-auto px-4 py-4' },
                        React.createElement('div', { className: 'flex items-center justify-between' },
                            React.createElement('div', { className: 'flex items-center space-x-3' },
                                React.createElement('div', { className: 'p-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl' },
                                    React.createElement(Moon, { className: 'w-6 h-6 text-white' })
                                ),
                                React.createElement('div', {},
                                    React.createElement('h1', { className: 'text-xl font-bold text-gray-800' }, 'DreamVault'),
                                    React.createElement('p', { className: 'text-sm text-gray-500' }, 'Your personal dream journal')
                                )
                            ),
                            isPremium && React.createElement('div', { className: 'flex items-center space-x-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-sm font-medium' },
                                React.createElement(Crown, { className: 'w-4 h-4' }),
                                React.createElement('span', {}, 'Premium')
                            )
                        )
                    )
                ),

                // Navigation
                React.createElement('div', { className: 'bg-white border-b border-gray-100' },
                    React.createElement('div', { className: 'max-w-6xl mx-auto px-4' },
                        React.createElement('div', { className: 'flex space-x-8' },
                            React.createElement('button', {
                                onClick: () => setCurrentView('journal'),
                                className: `py-4 px-2 border-b-2 font-medium text-sm transition-colors ${
                                    currentView === 'journal'
                                        ? 'border-blue-600 text-blue-600'
                                        : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`
                            },
                                React.createElement('div', { className: 'flex items-center space-x-2' },
                                    React.createElement(Moon, { className: 'w-4 h-4' }),
                                    React.createElement('span', {}, 'My Dreams')
                                )
                            ),
                            React.createElement('button', {
                                onClick: () => setCurrentView('add'),
                                className: `py-4 px-2 border-b-2 font-medium text-sm transition-colors ${
                                    currentView === 'add'
                                        ? 'border-blue-600 text-blue-600'
                                        : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`
                            },
                                React.createElement('div', { className: 'flex items-center space-x-2' },
                                    React.createElement(Plus, { className: 'w-4 h-4' }),
                                    React.createElement('span', {}, 'Add Dream')
                                )
                            ),
                            React.createElement('button', {
                                onClick: () => setCurrentView('analytics'),
                                className: `py-4 px-2 border-b-2 font-medium text-sm transition-colors ${
                                    currentView === 'analytics'
                                        ? 'border-blue-600 text-blue-600'
                                        : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`
                            },
                                React.createElement('div', { className: 'flex items-center space-x-2' },
                                    React.createElement(BarChart3, { className: 'w-4 h-4' }),
                                    React.createElement('span', {}, 'Analytics')
                                )
                            )
                        )
                    )
                ),

                // Main Content
                React.createElement('div', { className: 'max-w-6xl mx-auto px-4 py-8' },
                    currentView === 'journal' && renderJournal(),
                    currentView === 'add' && renderAddDream(),
                    currentView === 'analytics' && renderAnalytics()
                ),

                // Floating Add Button (Mobile)
                React.createElement('button', {
                    onClick: () => setCurrentView('add'),
                    className: 'fixed bottom-6 right-6 bg-gradient-to-r from-purple-600 to-blue-600 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all md:hidden'
                },
                    React.createElement(Plus, { className: 'w-6 h-6' })
                ),

                // Premium Modal
                showPremiumModal && React.createElement(PremiumModal)
            );
        };

        ReactDOM.render(React.createElement(DreamJournalApp), document.getElementById('root'));
    </script>
    
    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
