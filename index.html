<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamVault - Your Personal Dream Journal</title>
    <meta name="description" content="Record, analyze, and understand your dreams with AI-powered insights">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#6366f1">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="DreamVault">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåô</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåô</text></svg>">
    
    <!-- React and Tailwind -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <style>
        .ad-banner {
            background: linear-gradient(45deg, #f3f4f6, #e5e7eb);
            border: 1px dashed #d1d5db;
            padding: 20px;
            text-align: center;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .loading {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { 
            Plus, Moon, BarChart3, Crown, Search, Trash2, Edit3, Star, 
            TrendingUp, Brain, Zap, Download, Share2, DollarSign, Users 
        } = lucide;

        const DreamJournalApp = () => {
            const [currentView, setCurrentView] = useState('journal');
            const [dreams, setDreams] = useState([]);
            const [newDream, setNewDream] = useState({
                title: '',
                content: '',
                mood: 'neutral',
                lucid: false,
                tags: [],
                date: new Date().toISOString().split('T')[0]
            });
            const [isEditing, setIsEditing] = useState(false);
            const [editingId, setEditingId] = useState(null);
            const [isPremium, setIsPremium] = useState(false);
            const [showPremiumModal, setShowPremiumModal] = useState(false);
            const [searchQuery, setSearchQuery] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [aiAnalyzing, setAiAnalyzing] = useState(false);
            
            // PWA Installation
            const [deferredPrompt, setDeferredPrompt] = useState(null);
            const [showInstallPrompt, setShowInstallPrompt] = useState(false);
            
            // Ad management
            const [showAd, setShowAd] = useState(true);
            
            useEffect(() => {
                // Load data from localStorage
                const savedDreams = localStorage.getItem('dreamvault_dreams');
                const savedPremium = localStorage.getItem('dreamvault_premium');
                
                if (savedDreams) {
                    setDreams(JSON.parse(savedDreams));
                } else {
                    // Sample dreams for demo
                    const sampleDreams = [
                        {
                            id: 1,
                            title: "Flying Over Mountains",
                            content: "I was soaring above snow-capped peaks, feeling completely free. The air was crisp and I could see valleys below filled with golden light.",
                            mood: 'happy',
                            lucid: true,
                            tags: ['flying', 'mountains', 'freedom'],
                            date: '2025-06-28',
                            aiInsight: "Flying dreams often represent a desire for freedom and escape from limitations. The mountains suggest overcoming obstacles.",
                            fullAnalysis: "This dream indicates a strong desire for personal freedom and the ability to rise above current challenges. The mountain imagery suggests you're working through significant obstacles in your life. The golden light represents hope and positive outcomes."
                        }
                    ];
                    setDreams(sampleDreams);
                }
                
                if (savedPremium === 'true') {
                    setIsPremium(true);
                }
                
                // PWA install prompt
                const handler = (e) => {
                    e.preventDefault();
                    setDeferredPrompt(e);
                    setShowInstallPrompt(true);
                };
                
                window.addEventListener('beforeinstallprompt', handler);
                return () => window.removeEventListener('beforeinstallprompt', handler);
            }, []);
            
            // Save to localStorage whenever dreams change
            useEffect(() => {
                localStorage.setItem('dreamvault_dreams', JSON.stringify(dreams));
            }, [dreams]);
            
            const installApp = async () => {
                if (!deferredPrompt) return;
                
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                
                if (outcome === 'accepted') {
                    setDeferredPrompt(null);
                    setShowInstallPrompt(false);
                }
            };
            
            const generateAIInsight = async (dream) => {
                setAiAnalyzing(true);
                
                // Simulate AI API call
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                const insights = [
                    "This dream may reflect your subconscious processing of recent experiences and emotions.",
                    "The symbols in this dream suggest personal growth, transformation, and inner wisdom.",
                    "This type of dream often indicates a need for emotional balance and self-reflection.",
                    "Your dream suggests you're working through important life decisions and changes.",
                    "This dream pattern shows your creative mind processing daily experiences and aspirations."
                ];
                
                const fullAnalyses = [
                    "Your subconscious mind is actively processing recent experiences, particularly those involving relationships and personal growth. The dream symbols suggest you're integrating new perspectives and preparing for positive changes in your life.",
                    "This dream indicates a period of significant personal transformation. The imagery suggests you're developing new aspects of your personality and discovering hidden strengths. Pay attention to recurring themes as they reveal important life patterns.",
                    "The emotional tone of this dream reflects your current need for balance and stability. Your subconscious is working to harmonize different aspects of your life, suggesting that conscious effort toward balance will be rewarding."
                ];
                
                setAiAnalyzing(false);
                
                return {
                    insight: insights[Math.floor(Math.random() * insights.length)],
                    fullAnalysis: fullAnalyses[Math.floor(Math.random() * fullAnalyses.length)]
                };
            };
            
            const addDream = async () => {
                if (!newDream.title || !newDream.content) return;
                
                setIsLoading(true);
                
                const aiResult = await generateAIInsight(newDream);
                
                const dreamToAdd = {
                    ...newDream,
                    id: Date.now(),
                    aiInsight: aiResult.insight,
                    fullAnalysis: aiResult.fullAnalysis
                };
                
                if (isEditing) {
                    setDreams(dreams.map(d => d.id === editingId ? dreamToAdd : d));
                    setIsEditing(false);
                    setEditingId(null);
                } else {
                    setDreams([dreamToAdd, ...dreams]);
                }
                
                setNewDream({
                    title: '',
                    content: '',
                    mood: 'neutral',
                    lucid: false,
                    tags: [],
                    date: new Date().toISOString().split('T')[0]
                });
                
                setCurrentView('journal');
                setIsLoading(false);
            };
            
            const editDream = (dream) => {
                setNewDream(dream);
                setIsEditing(true);
                setEditingId(dream.id);
                setCurrentView('add');
            };
            
            const deleteDream = (id) => {
                setDreams(dreams.filter(d => d.id !== id));
            };
            
            const upgradeToPremium = () => {
                // Simulate payment success
                setIsPremium(true);
                localStorage.setItem('dreamvault_premium', 'true');
                setShowPremiumModal(false);
                setShowAd(false);
                alert('Welcome to Premium! üéâ All features unlocked!');
            };
            
            const getMoodStats = () => {
                const moods = dreams.reduce((acc, dream) => {
                    acc[dream.mood] = (acc[dream.mood] || 0) + 1;
                    return acc;
                }, {});
                return moods;
            };
            
            const getTagStats = () => {
                const tags = dreams.flatMap(d => d.tags).reduce((acc, tag) => {
                    acc[tag] = (acc[tag] || 0) + 1;
                    return acc;
                }, {});
                return Object.entries(tags).sort(([,a], [,b]) => b - a).slice(0, 5);
            };
            
            const filteredDreams = dreams.filter(dream =>
                dream.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                dream.content.toLowerCase().includes(searchQuery.toLowerCase()) ||
                dream.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()))
            );
            
            const AdBanner = () => (
                !isPremium && showAd && (
                    <div className="ad-banner">
                        <div className="text-sm text-gray-600 mb-2">Advertisement</div>
                        <div className="text-lg font-semibold text-gray-800 mb-2">
                            üåü Upgrade to Premium for Ad-Free Experience!
                        </div>
                        <button 
                            onClick={() => setShowPremiumModal(true)}
                            className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"
                        >
                            Remove Ads - ‚Ç¨2.99/month
                        </button>
                    </div>
                )
            );
            
            const PremiumModal = () => (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-2xl p-6 max-w-md w-full">
                        <div className="text-center mb-6">
                            <Crown className="w-12 h-12 text-yellow-500 mx-auto mb-3" />
                            <h2 className="text-2xl font-bold text-gray-800">Unlock Premium</h2>
                            <p className="text-gray-600 mt-2">Get deeper insights into your dreams</p>
                        </div>
                        
                        <div className="space-y-3 mb-6">
                            <div className="flex items-center space-x-3">
                                <Brain className="w-5 h-5 text-blue-500" />
                                <span className="text-gray-700">Advanced AI dream analysis</span>
                            </div>
                            <div className="flex items-center space-x-3">
                                <TrendingUp className="w-5 h-5 text-green-500" />
                                <span className="text-gray-700">Detailed pattern recognition</span>
                            </div>
                            <div className="flex items-center space-x-3">
                                <Zap className="w-5 h-5 text-purple-500" />
                                <span className="text-gray-700">Unlimited dream storage</span>
                            </div>
                            <div className="flex items-center space-x-3">
                                <BarChart3 className="w-5 h-5 text-orange-500" />
                                <span className="text-gray-700">Export your dream data</span>
                            </div>
                            <div className="flex items-center space-x-3">
                                <Star className="w-5 h-5 text-yellow-500" />
                                <span className="text-gray-700">Ad-free experience</span>
                            </div>
                        </div>
                        
                        <div className="bg-green-50 border border-green-200 rounded-lg p-4 mb-6">
                            <div className="flex items-center space-x-2 mb-2">
                                <DollarSign className="w-5 h-5 text-green-600" />
                                <span className="font-semibold text-green-800">Special Launch Price</span>
                            </div>
                            <p className="text-green-700 text-sm">
                                Get your first month for just ‚Ç¨0.99! Then ‚Ç¨2.99/month.
                            </p>
                        </div>
                        
                        <div className="space-y-3">
                            <button 
                                onClick={upgradeToPremium}
                                className="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 rounded-xl font-semibold hover:from-purple-700 hover:to-blue-700 transition-all"
                            >
                                Start Free Trial - ‚Ç¨0.99/month
                            </button>
                            <button 
                                onClick={() => setShowPremiumModal(false)}
                                className="w-full text-gray-500 py-2"
                            >
                                Maybe Later
                            </button>
                        </div>
                    </div>
                </div>
            );

            const renderJournal = () => (
                <div className="space-y-4">
                    <AdBanner />
                    
                    <div className="flex items-center justify-between">
                        <h2 className="text-xl font-semibold text-gray-800">Your Dreams</h2>
                        <div className="flex items-center space-x-2">
                            <div className="relative">
                                <Search className="w-4 h-4 absolute left-3 top-3 text-gray-400" />
                                <input
                                    type="text"
                                    placeholder="Search dreams..."
                                    value={searchQuery}
                                    onChange={(e) => setSearchQuery(e.target.value)}
                                    className="pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                />
                            </div>
                        </div>
                    </div>
                    
                    {filteredDreams.length === 0 ? (
                        <div className="text-center py-12 text-gray-500">
                            <Moon className="w-16 h-16 mx-auto mb-4 text-gray-300" />
                            <p>No dreams yet. Start recording your dreams!</p>
                        </div>
                    ) : (
                        <div className="space-y-4">
                            {filteredDreams.map(dream => (
                                <div key={dream.id} className="bg-white border border-gray-200 rounded-xl p-6 hover:shadow-md transition-shadow">
                                    <div className="flex items-start justify-between mb-3">
                                        <div className="flex-1">
                                            <div className="flex items-center space-x-2 mb-2">
                                                <h3 className="font-semibold text-gray-800">{dream.title}</h3>
                                                {dream.lucid && <Star className="w-4 h-4 text-yellow-500" />}
                                            </div>
                                            <p className="text-sm text-gray-500 mb-2">{dream.date}</p>
                                        </div>
                                        <div className="flex items-center space-x-2">
                                            <button onClick={() => editDream(dream)} className="p-1 text-gray-400 hover:text-blue-500">
                                                <Edit3 className="w-4 h-4" />
                                            </button>
                                            <button onClick={() => deleteDream(dream.id)} className="p-1 text-gray-400 hover:text-red-500">
                                                <Trash2 className="w-4 h-4" />
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <p className="text-gray-700 mb-3 leading-relaxed">{dream.content}</p>
                                    
                                    <div className="flex items-center justify-between mb-4">
                                        <div className="flex items-center space-x-3">
                                            <span className={`px-3 py-1 rounded-full text-xs font-medium ${
                                                dream.mood === 'happy' ? 'bg-green-100 text-green-800' :
                                                dream.mood === 'anxious' ? 'bg-red-100 text-red-800' :
                                                dream.mood === 'sad' ? 'bg-blue-100 text-blue-800' :
                                                'bg-gray-100 text-gray-800'
                                            }`}>
                                                {dream.mood}
                                            </span>
                                            <div className="flex flex-wrap gap-1">
                                                {dream.tags.map(tag => (
                                                    <span key={tag} className="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full">
                                                        #{tag}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    {dream.aiInsight && (
                                        <div className="p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                                            <div className="flex items-center space-x-2 mb-1">
                                                <Brain className="w-4 h-4 text-blue-600" />
                                                <span className="text-sm font-medium text-blue-800">AI Insight</span>
                                                {!isPremium && <Crown className="w-4 h-4 text-yellow-500" />}
                                            </div>
                                            <p className="text-sm text-blue-700">
                                                {isPremium ? dream.fullAnalysis || dream.aiInsight : dream.aiInsight}
                                            </p>
                                            {!isPremium && (
                                                <button 
                                                    onClick={() => setShowPremiumModal(true)}
                                                    className="text-xs text-blue-600 hover:text-blue-800 mt-1 font-medium"
                                                >
                                                    Unlock Full Analysis ‚Üí
                                                </button>
                                            )}
                                        </div>
                                    )}
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );

            const renderAddDream = () => (
                <div className="max-w-2xl mx-auto">
                    <h2 className="text-xl font-semibold text-gray-800 mb-6">
                        {isEditing ? 'Edit Dream' : 'Record New Dream'}
                    </h2>
                    
                    <div className="bg-white border border-gray-200 rounded-xl p-6 space-y-4">
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Dream Title</label>
                            <input
                                type="text"
                                value={newDream.title}
                                onChange={(e) => setNewDream({...newDream, title: e.target.value})}
                                placeholder="Give your dream a title..."
                                className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            />
                        </div>
                        
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Dream Description</label>
                            <textarea
                                value={newDream.content}
                                onChange={(e) => setNewDream({...newDream, content: e.target.value})}
                                placeholder="Describe your dream in detail..."
                                rows={6}
                                className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            />
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Mood</label>
                                <select
                                    value={newDream.mood}
                                    onChange={(e) => setNewDream({...newDream, mood: e.target.value})}
                                    className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                >
                                    <option value="happy">Happy üòä</option>
                                    <option value="anxious">Anxious üò∞</option>
                                    <option value="sad">Sad üò¢</option>
                                    <option value="excited">Excited ü§©</option>
                                    <option value="neutral">Neutral üòê</option>
                                    <option value="confused">Confused üòï</option>
                                </select>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">Date</label>
                                <input
                                    type="date"
                                    value={newDream.date}
                                    onChange={(e) => setNewDream({...newDream, date: e.target.value})}
                                    className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                />
                            </div>
                        </div>
                        
                        <div className="flex items-center space-x-4">
                            <label className="flex items-center space-x-2 cursor-pointer">
                                <input
                                    type="checkbox"
                                    checked={newDream.lucid}
                                    onChange={(e) => setNewDream({...newDream, lucid: e.target.checked})}
                                    className="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                                />
                                <span className="text-sm text-gray-700">Lucid Dream</span>
                                <Star className="w-4 h-4 text-yellow-500" />
                            </label>
                        </div>
                        
                        <div>
                            <label className="block text-sm font-medium text-gray-700 mb-2">Tags (comma separated)</label>
                            <input
                                type="text"
                                value={newDream.tags.join(', ')}
                                onChange={(e) => setNewDream({...newDream, tags: e.target.value.split(',').map(t => t.trim()).filter(t => t)})}
                                placeholder="flying, water, family, work..."
                                className="w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            />
                        </div>
                        
                        <div className="flex space-x-3 pt-4">
                            <button
                                onClick={addDream}
                                disabled={isLoading || aiAnalyzing}
                                className="flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50"
                            >
                                {isLoading || aiAnalyzing ? (
                                    <span className="flex items-center justify-center">
                                        <div className="loading mr-2">üß†</div>
                                        Analyzing Dream...
                                    </span>
                                ) : (
                                    isEditing ? 'Update Dream' : 'Save Dream'
                                )}
                            </button>
                        </div>
                    </div>
                </div>
            );

            const renderAnalytics = () => {
                const moodStats = getMoodStats();
                const tagStats = getTagStats();
                
                return (
                    <div className="space-y-6">
                        <AdBanner />
                        
                        <div className="flex items-center justify-between">
                            <h2 className="text-xl font-semibold text-gray-800">Dream Analytics</h2>
                            {!isPremium && (
                                <button 
                                    onClick={() => setShowPremiumModal(true)}
                                    className="flex items-center space-x-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all"
                                >
                                    <Crown className="w-4 h-4" />
                                    <span>Upgrade for Advanced Analytics</span>
                                </button>
                            )}
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div className="bg-white border border-gray-200 rounded-xl p-6">
                                <h3 className="font-semibold text-gray-800 mb-4 flex items-center">
                                    <BarChart3 className="w-5 h-5 mr-2 text-blue-600" />
                                    Mood Distribution
                                </h3>
                                <div className="space-y-3">
                                    {Object.entries(moodStats).map(([mood, count]) => (
                                        <div key={mood} className="flex items-center justify-between">
                                            <span className="capitalize text-gray-700">{mood}</span>
                                            <div className="flex items-center space-x-2">
                                                <div className="w-24 bg-gray-200 rounded-full h-2">
                                                    <div 
                                                        className="bg-blue-600 h-2 rounded-full" 
                                                        style={{width: `${(count / dreams.length) * 100}%`}}
                                                    ></div>
                                                </div>
                                                <span className="text-sm text-gray-500 w-8">{count}</span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            
                            <div className="bg-white border border-gray-200 rounded-xl p-6">
                                <h3 className="font-semibold text-gray-800 mb-4 flex items-center">
                                    <TrendingUp className="w-5 h-5 mr-2 text-green-600" />
                                    Top Dream Themes
                                </h3>
                                <div className="space-y-3">
                                    {tagStats.map(([tag, count]) => (
                                        <div key={tag} className="flex items-center justify-between">
                                            <span className="text-gray-700">#{tag}</span>
                                            <span className="bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-sm">
                                                {count}
                                            </span>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                        
                        <div className="bg-white border border-gray-200 rounded-xl p-6">
                            <h3 className="font-semibold text-gray-800 mb-4">Dream Summary</h3>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                                <div>
                                    <div className="text-2xl font-bold text-orange-600">
                                        {dreams.length > 0 ? Math.round(dreams.reduce((acc, d) => acc + d.content.length, 0) / dreams.length) : 0}
                                    </div>
                                    <div className="text-sm text-gray-500">Avg. Length</div>
                                </div>
                            </div>
                        </div>
                        
                        {!isPremium && (
                            <div className="bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-xl p-6 text-center">
                                <Crown className="w-12 h-12 text-yellow-500 mx-auto mb-3" />
                                <h3 className="font-semibold text-gray-800 mb-2">Unlock Advanced Analytics</h3>
                                <p className="text-gray-600 mb-4">Get detailed pattern analysis, dream interpretation trends, and personalized insights.</p>
                                <button 
                                    onClick={() => setShowPremiumModal(true)}
                                    className="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all"
                                >
                                    Upgrade Now
                                </button>
                            </div>
                        )}
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50">
                    {/* Header */}
                    <div className="bg-white shadow-sm border-b border-gray-100">
                        <div className="max-w-6xl mx-auto px-4 py-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center space-x-3">
                                    <div className="p-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl">
                                        <Moon className="w-6 h-6 text-white" />
                                    </div>
                                    <div>
                                        <h1 className="text-xl font-bold text-gray-800">DreamVault</h1>
                                        <p className="text-sm text-gray-500">Your personal dream journal</p>
                                    </div>
                                </div>
                                <div className="flex items-center space-x-3">
                                    {showInstallPrompt && (
                                        <button
                                            onClick={installApp}
                                            className="flex items-center space-x-2 bg-green-600 text-white px-3 py-1 rounded-full text-sm font-medium hover:bg-green-700 transition-colors"
                                        >
                                            <Download className="w-4 h-4" />
                                            <span>Install App</span>
                                        </button>
                                    )}
                                    {isPremium && (
                                        <div className="flex items-center space-x-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-sm font-medium">
                                            <Crown className="w-4 h-4" />
                                            <span>Premium</span>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Navigation */}
                    <div className="bg-white border-b border-gray-100">
                        <div className="max-w-6xl mx-auto px-4">
                            <div className="flex space-x-8">
                                <button
                                    onClick={() => setCurrentView('journal')}
                                    className={`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${
                                        currentView === 'journal'
                                            ? 'border-blue-600 text-blue-600'
                                            : 'border-transparent text-gray-500 hover:text-gray-700'
                                    }`}
                                >
                                    <div className="flex items-center space-x-2">
                                        <Moon className="w-4 h-4" />
                                        <span>My Dreams</span>
                                    </div>
                                </button>
                                <button
                                    onClick={() => setCurrentView('add')}
                                    className={`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${
                                        currentView === 'add'
                                            ? 'border-blue-600 text-blue-600'
                                            : 'border-transparent text-gray-500 hover:text-gray-700'
                                    }`}
                                >
                                    <div className="flex items-center space-x-2">
                                        <Plus className="w-4 h-4" />
                                        <span>Add Dream</span>
                                    </div>
                                </button>
                                <button
                                    onClick={() => setCurrentView('analytics')}
                                    className={`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${
                                        currentView === 'analytics'
                                            ? 'border-blue-600 text-blue-600'
                                            : 'border-transparent text-gray-500 hover:text-gray-700'
                                    }`}
                                >
                                    <div className="flex items-center space-x-2">
                                        <BarChart3 className="w-4 h-4" />
                                        <span>Analytics</span>
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="max-w-6xl mx-auto px-4 py-8">
                        {currentView === 'journal' && renderJournal()}
                        {currentView === 'add' && renderAddDream()}
                        {currentView === 'analytics' && renderAnalytics()}
                    </div>

                    {/* Floating Add Button (Mobile) */}
                    <button
                        onClick={() => setCurrentView('add')}
                        className="fixed bottom-6 right-6 bg-gradient-to-r from-purple-600 to-blue-600 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition-all md:hidden"
                    >
                        <Plus className="w-6 h-6" />
                    </button>

                    {/* Premium Modal */}
                    {showPremiumModal && <PremiumModal />}
                </div>
            );
        };

        ReactDOM.render(<DreamJournalApp />, document.getElementById('root'));
    </script>
    
    <!-- PWA Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>    <div className="text-2xl font-bold text-blue-600">{dreams.length}</div>
                                    <div className="text-sm text-gray-500">Total Dreams</div>
                                </div>
                                <div>
                                    <div className="text-2xl font-bold text-green-600">
                                        {dreams.filter(d => d.lucid).length}
                                    </div>
                                    <div className="text-sm text-gray-500">Lucid Dreams</div>
                                </div>
                                <div>
                                    <div className="text-2xl font-bold text-purple-600">
                                        {new Set(dreams.flatMap(d => d.tags)).size}
                                    </div>
                                    <div className="text-sm text-gray-500">Unique Themes</div>
                                </div>
                                <div>
